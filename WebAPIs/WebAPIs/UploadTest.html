<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <meta charset="utf-8" />
</head>
<body>
    <script src="http://cdn.bootcss.com/jquery/3.1.0/jquery.js"></script>
    <!--<form name="form1" method="post" enctype="multipart/form-data" action="api/upload">
        <div>
            <label for="caption">Image Caption</label>
            <input name="caption" type="text" />
        </div>
        <div>
            <label for="image1">Image File</label>
            <input name="image1" type="file" />
        </div>
        <div>
            <input name="txtContent" type="text" value="fuck"/>
        </div>
        <div>
            <label for="shit">shit Caption</label>
            <input name="shit" type="text" />
        </div>
        <div>
            <input type="submit" value="Submit" />
        </div>
    </form>-->
    <br />
    <!--<form name="trip_search" method="post" enctype="multipart/form-data" action="api/upload">
        <div>
            <input type="radio" name="trip" value="round-trip" />
            Round-Trip
        </div>
        <div>
            <input type="radio" name="trip" value="one-way" />
            One-Way
        </div>

        <div>
            <input type="checkbox" name="options" value="nonstop" />
            Only show non-stop flights
        </div>
        <div>
            <input type="checkbox" name="options" value="airports" />
            Compare nearby airports
        </div>
        <div>
            <input type="checkbox" name="options" value="dates" />
            My travel dates are flexible
        </div>

        <div>
            <label for="seat">Seating Preference</label>
            <select name="seat">
                <option value="aisle">Aisle</option>
                <option value="window">Window</option>
                <option value="center">Center</option>
                <option value="none">No Preference</option>
            </select>
        </div>
        <div>
            <input type="submit" value="Submit" />

        </div>
    </form>-->
    <form enctype="multipart/form-data" method="post" name="fileinfo">
        <label>Your email address:</label>
        <input type="email" autocomplete="on" autofocus name="userid" placeholder="email" required size="32" maxlength="64" /><br />
        <label>Custom file label:</label>
        <input type="text" name="filelabel" size="12" maxlength="32" /><br />
        <label>File to stash:</label>
        <input type="file" name="file" required />
        <input type="submit" value="Stash the file!" />
    </form>
    <div></div>
    <script>
        var form = document.forms.namedItem("fileinfo");
        form.addEventListener('submit', function (ev) {

            var oOutput = document.querySelector("div"),
                oData = new FormData(form);

            oData.append("CustomField", "This is some extra data");

            var oReq = new XMLHttpRequest();
            oReq.open("POST", "api/upload", true);
            oReq.onload = function (oEvent) {
                if (oReq.status == 200) {
                    oOutput.innerHTML = "Uploaded!";
                } else {
                    oOutput.innerHTML = "Error " + oReq.status + " occurred when trying to upload your file.<br \/>";
                }
            };

            oReq.send(oData);
            ev.preventDefault();
        }, false);
    </script>
</body>
</html>
